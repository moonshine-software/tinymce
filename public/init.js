document.addEventListener("alpine:init",()=>{Alpine.data("tinymce",(t={},a={})=>({options:t,callbacks:a,async init(){await this.$nextTick();const e=new tinymce.Editor(this.$el.getAttribute("id"),this.config(Alpine.store("darkMode").on),tinymce.EditorManager);e.on("blur",()=>tinymce.activeEditor.save()),e.render(),window.addEventListener("darkMode:toggle",()=>tinymce.remove(e))},fileManager:(e,i,n)=>{const l=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,o=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight;console.log(n);const c=(t.path_absolute??"/")+(t.file_manager??"")+"?editor="+n.fieldname+(n.filetype==="image"?"&type=Images":"&type=Files");tinymce.activeEditor.windowManager.openUrl({url:c,title:"File Manager",width:l*.8,height:o*.8,resizable:"yes",close_previous:"no",onMessage:(r,s)=>e(s.content)})},config(e){for(const i in this.callbacks)this.callbacks[i]=new Function("return "+this.callbacks[i])();return Object.assign({path_absolute:"/",file_manager:"",relative_urls:!1,branding:!1,height:50,skin:e?"oxide-dark":"oxide",content_css:e?"dark":"default",file_picker_callback:this.options.file_manager?this.fileManager:null},this.options,this.callbacks)}}))});
